(function(e){"use strict";e.fn.rating=function(){function n(t,n){var r=e(t).find("i[data-value="+n+"]");r.removeClass("icon-star-empty").addClass("icon-star");r.prevAll("i").removeClass("icon-star-empty").addClass("icon-star");r.nextAll("i").removeClass("icon-star").addClass("icon-star-empty")}function r(t){var n=e(t);n.find("i").removeClass("icon-star").addClass("icon-star-empty");n.find(".rating-clear").hide();n.find("input").val("").trigger("change")}var t;for(t=this.length-1;t>=0;t--){var i,s,o,u=e(this[t]),a=u.data("max")||5,f=u.data("min")||0,l=u.data("clearable")||null,c="";for(s=f;s<=a;s++){c+=['<i class="icon-star-empty" data-value="',s,'"></i>'].join("")}if(l){c+=[' <a class="rating-clear" style="display:none;" href="javascript:void"><i class="icon-remove"></i> ',l,"</a>"].join("")}i=['<div class="rating-input">',c,'<input type="hidden" name="',u.attr("name"),'" value="',u.val(),'" id="',u.attr("id"),'" />',"</div>"].join("");u.replaceWith(i)}e(".rating-input").on("mouseenter","i",function(){var t=e(this);n(t.parent(),t.data("value"))}).on("mouseleave","i",function(){var t=e(this);var i=t.siblings("input").val();if(i){n(t.parent(),i)}else{r(t.parent())}}).on("click","i",function(){var t=e(this);var n=t.data("value");t.siblings("input").val(n).trigger("change");t.siblings(".rating-clear").show()}).on("click",".rating-clear",function(){r(e(this).parent())}).each(function(){var t=e(this).find("input").val();if(t){n(this,t);e(this).find(".rating-clear").show()}})};e(function(){if(e("input.rating[type=number]").length>0){e("input.rating[type=number]").rating()}})})(jQuery)